<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>감정 나무 키우기</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f0f8f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    h1 {
      color: #2c6e49;
    }
    #tree-image {
      width: 200px;
      height: 200px;
      margin: 20px;
      display: none;
    }
    .buttons {
      display: none;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    button:hover {
      transform: scale(1.1);
    }
    .water { background-color: #cce5ff; }
    .sun { background-color: #fff3b0; }
    .soil { background-color: #e0c097; }
    .fertilizer { background-color: #d3bdf0; }
    #name-section {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

  <!-- 이름 입력 영역 -->
  <div id="name-section">
    <input type="text" id="username" placeholder="이름을 입력하세요" />
    <button onclick="startGame()">시작하기</button>
  </div>

  <!-- 제목 -->
  <h1 id="title">🌱 오늘의 감정으로 나무를 키워요</h1>

  <!-- 나무 이미지 -->
  <img id="tree-image" src="seed.png" alt="씨앗 이미지" />

  <!-- 감정 버튼들 -->
  <div class="buttons" id="emotion-buttons">
    <button class="water" onclick="growTree()">💧 물 (슬픔)</button>
    <button class="sun" onclick="growTree()">☀️ 해 (기쁨)</button>
    <button class="soil" onclick="growTree()">🥔 흙 (보통)</button>
    <button class="fertilizer" onclick="growTree()">🧪 비료 (짜증)</button>
  </div>

  <!-- 배경음악 -->
  <audio id="bgm" loop>
    <source src="music.mp3" type="audio/mpeg" />
    브라우저가 오디오를 지원하지 않습니다.
  </audio>

  <!-- JavaScript 로직 -->
  <script>
    let clickCount = 0;
    const totalClicks = 25;
    const treeImages = ["seed.png", "sprout.png", "small-tree.png", "big-tree.png"];

    function startGame() {
      const username = document.getElementById("username").value.trim();
      if (username === "") {
        alert("이름을 입력해주세요!");
        return;
      }

      // 제목 변경
      document.getElementById("title").textContent = username + "의 감정나무 🌳";

      // UI 전환
      document.getElementById("tree-image").style.display = "block";
      document.getElementById("emotion-buttons").style.display = "flex";
      document.getElementById("name-section").style.display = "none";

      // 배경음악 재생
      const bgm = document.getElementById("bgm");
      bgm.volume = 0.3;
      bgm.play().catch(() => {
        console.log("브라우저 자동 재생 차단 - 클릭 후 음악 재생됨");
      });
    }

    function growTree() {
      clickCount++;
      if (clickCount <= totalClicks) {
        const stage = Math.floor((clickCount - 1) / (totalClicks / (treeImages.length - 1)));
        document.getElementById("tree-image").src = treeImages[stage];
      }

      if (clickCount === totalClicks) {
        alert("나무가 모두 자랐어요! 🌳");
      }
    }
  </script>
</body>
</html>
